{"version":3,"sources":["../../../src/app/models/User.js"],"names":["User","password","bcrypt","compare","sequelize","name","Sequelize","STRING","surname","email","addHook","user","hash","models","belongsToMany","Class","through","foreignKey","otherKey","Model"],"mappings":";;;;;;;;;;AAAA;;;;AACA;;;;;;;;;;;;IAEMA,I;;;;;;;;;;;kCA6BUC,Q,EAAU;AACtB,aAAOC,mBAAOC,OAAP,CAAeF,QAAf,EAAyB,KAAKA,QAA9B,CAAP;AACD;;;yBA9BWG,S,EAAW;AACrB,mFACE;AACEC,cAAMC,oBAAUC,MADlB;AAEEC,iBAASF,oBAAUC,MAFrB;AAGEE,eAAOH,oBAAUC,MAHnB;AAIEN,kBAAUK,oBAAUC;AAJtB,OADF,EAOE,EAAEH,oBAAF,EAPF;AASA,WAAKM,OAAL,CAAa,YAAb,EAA2B,gBAAOC,IAAP,EAAgB;AACzC,YAAIA,KAAKV,QAAT,EAAmB;AACjB;AACAU,eAAKV,QAAL,GAAgB,MAAMC,mBAAOU,IAAP,CAAYD,KAAKV,QAAjB,EAA2B,CAA3B,CAAtB;AACD;AACF,OALD;;AAOA,aAAO,IAAP;AACD;;;8BAEgBY,M,EAAQ;AACvB,WAAKC,aAAL,CAAmBD,OAAOE,KAA1B,EAAiC;AAC/BC,iBAAS,eADsB;AAE/BC,oBAAY,SAFmB;AAG/BC,kBAAU;AAHqB,OAAjC;AAKD;;;;EA3BgBC,gB;;kBAkCJnB,I","file":"User.js","sourcesContent":["import Sequelize, { Model } from 'sequelize';\r\nimport bcrypt from 'bcryptjs';\r\n\r\nclass User extends Model {\r\n  static init(sequelize) {\r\n    super.init(\r\n      {\r\n        name: Sequelize.STRING,\r\n        surname: Sequelize.STRING,\r\n        email: Sequelize.STRING,\r\n        password: Sequelize.STRING,\r\n      },\r\n      { sequelize }\r\n    );\r\n    this.addHook('beforeSave', async (user) => {\r\n      if (user.password) {\r\n        // eslint-disable-next-line no-param-reassign\r\n        user.password = await bcrypt.hash(user.password, 8);\r\n      }\r\n    });\r\n\r\n    return this;\r\n  }\r\n\r\n  static associate(models) {\r\n    this.belongsToMany(models.Class, {\r\n      through: 'Student_Class',\r\n      foreignKey: 'id_user',\r\n      otherKey: 'id_class',\r\n    });\r\n  }\r\n\r\n  checkPassword(password) {\r\n    return bcrypt.compare(password, this.password);\r\n  }\r\n}\r\n\r\nexport default User;\r\n"]}