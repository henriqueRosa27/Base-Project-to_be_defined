{"version":3,"sources":["../../../src/app/middlewares/uploadImage.js"],"names":["uploadImageStorage","storage","storageImage","fileFilter","req","file","cb","mimetype","single","res","next","err","status","json","errors"],"mappings":";;;;;;AAAA;;;;AACA;;;;;;AAEA,IAAMA,qBAAqB,sBAAO;AAChCC,WAASC,uBAAaD,OADU;AAEhCE,cAAY,oBAACC,GAAD,EAAMC,IAAN,EAAYC,EAAZ,EAAmB;AAC7B,QACED,KAAKE,QAAL,KAAkB,WAAlB,IACAF,KAAKE,QAAL,KAAkB,YADlB,IAEAF,KAAKE,QAAL,KAAkB,WAHpB,EAIE;AACA,aAAOD,GAAG,6BAAH,CAAP;AACD;;AAED,WAAOA,GAAG,IAAH,EAAS,IAAT,CAAP;AACD;AAZ+B,CAAP,EAaxBE,MAbwB,CAajB,OAbiB,CAA3B;;kBAee,UAACJ,GAAD,EAAMK,GAAN,EAAWC,IAAX,EAAoB;AACjCV,qBAAmBI,GAAnB,EAAwBK,GAAxB,EAA6B,UAACE,GAAD,EAAS;AACpC,QAAIA,GAAJ,EAAS,OAAOF,IAAIG,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAAEC,QAAQ,EAAEA,QAAQ,CAACH,GAAD,CAAV,EAAV,EAArB,CAAP;AACT,WAAOD,MAAP;AACD,GAHD;AAID,C","file":"uploadImage.js","sourcesContent":["import multer from 'multer';\r\nimport storageImage from '../../config/storageImage';\r\n\r\nconst uploadImageStorage = multer({\r\n  storage: storageImage.storage,\r\n  fileFilter: (req, file, cb) => {\r\n    if (\r\n      file.mimetype !== 'image/jpg' &&\r\n      file.mimetype !== 'image/jpeg' &&\r\n      file.mimetype !== 'image/png'\r\n    ) {\r\n      return cb('Formato de arquivo invÃ¡lido');\r\n    }\r\n\r\n    return cb(null, true);\r\n  },\r\n}).single('image');\r\n\r\nexport default (req, res, next) => {\r\n  uploadImageStorage(req, res, (err) => {\r\n    if (err) return res.status(400).json({ errors: { errors: [err] } });\r\n    return next();\r\n  });\r\n};\r\n"]}